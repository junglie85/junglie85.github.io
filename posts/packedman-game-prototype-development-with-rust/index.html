<!doctype html><html lang=en-gb>
<head>
<link rel=preload href=/lib/font-awesome/webfonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=preload href=/lib/font-awesome/webfonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=preload href=/lib/font-awesome/webfonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=preload href=/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous>
<script type=text/javascript src=https://latest.cactus.chat/cactus.js></script>
<link rel=stylesheet href=https://latest.cactus.chat/style.css type=text/css>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<title> Packedman game prototype development with Rust | Ashley's musings</title>
<link rel=canonical href=https://junglie85.github.io/posts/packedman-game-prototype-development-with-rust/>
<meta name=description content="I'm a software developer who likes to tinker with new technologies. I especially enjoy learning about [Rust](https://www.rust-lang.org/) and games development. Most of my writing is about how I've solved specific software challenges and implemented various features. Sometimes I may write about infrastructure or hardware. I hope the articles help give you inspiration for your programming.">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=robots content="all,follow">
<meta name=googlebot content="index,follow,snippet,archive">
<meta property="og:title" content="Packedman game prototype development with Rust">
<meta property="og:description" content="I&rsquo;m developing a Pac-Man inspired game in Rust called Packedman (think Pac-Man with guns). I&rsquo;m not using any game engines or frameworks like Bevy or Amythest. Instead, I&rsquo;m developing the game from scratch so that I can learn about how game engines work. In this and following articles I&rsquo;ll be talking about how I approached creating this game. There are many other ways - mine is not the best way, hopefully it&rsquo;s not the worst either!">
<meta property="og:type" content="article">
<meta property="og:url" content="https://junglie85.github.io/posts/packedman-game-prototype-development-with-rust/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2022-01-27T15:12:00+00:00">
<meta property="article:modified_time" content="2022-01-27T15:12:00+00:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Packedman game prototype development with Rust">
<meta name=twitter:description content="I&rsquo;m developing a Pac-Man inspired game in Rust called Packedman (think Pac-Man with guns). I&rsquo;m not using any game engines or frameworks like Bevy or Amythest. Instead, I&rsquo;m developing the game from scratch so that I can learn about how game engines work. In this and following articles I&rsquo;ll be talking about how I approached creating this game. There are many other ways - mine is not the best way, hopefully it&rsquo;s not the worst either!">
<link rel=stylesheet href=https://junglie85.github.io/css/styles.94f653e9e151e28067a7c5dbbc4600cbd5a3c721e79faaf971e523c40f3b249b8e4f20bb57810dfffa8d559ca5c140fd56eb4cd9c0853113ad08e66afdb08bdd.css integrity="sha512-lPZT6eFR4oBnp8XbvEYAy9WjxyHnn6r5ceUjxA87JJuOTyC7V4EN//qNVZylwUD9VutM2cCFMROtCOZq/bCL3Q=="><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]-->
<link rel=icon type=image/png href=https://junglie85.github.io/images/favicon.ico>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','G-6T5CSHL8L5','auto'),ga('send','pageview'))</script>
<script async src=https://www.google-analytics.com/analytics.js></script>
</head>
<body class="max-width mx-auto px3 ltr">
<div class="content index py4">
<div id=header-post>
<a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=top-icon-tablet href=# onclick="$('html, body').animate({scrollTop:0},'fast')" style=display:none aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
<span id=menu>
<span id=nav>
<ul>
<li><a href=/>Home</a></li>
<li><a href=/posts>Writings</a></li>
<li><a href=/tags>Tags</a></li>
<li><a href=/about>About</a></li>
</ul>
</span>
<br>
<span id=actions>
<ul>
<li>
<a class=icon href=https://junglie85.github.io/posts/game-programming-maths-cheat-sheet/ aria-label=Previous>
<i class="fas fa-chevron-left" aria-hidden=true onmouseover="$('#i-prev').toggle()" onmouseout="$('#i-prev').toggle()"></i>
</a>
</li>
<li>
<a class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast')" aria-label="Top of Page">
<i class="fas fa-chevron-up" aria-hidden=true onmouseover="$('#i-top').toggle()" onmouseout="$('#i-top').toggle()"></i>
</a>
</li>
<li>
<a class=icon href=# aria-label=Share>
<i class="fas fa-share-alt" aria-hidden=true onmouseover="$('#i-share').toggle()" onmouseout="$('#i-share').toggle()" onclick="return $('#share').toggle(),!1"></i>
</a>
</li>
</ul>
<span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span>
</span>
<br>
<div id=share style=display:none>
<ul>
<li>
<a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fjunglie85.github.io%2fposts%2fpackedman-game-prototype-development-with-rust%2f" aria-label=Facebook>
<i class="fab fa-facebook" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://twitter.com/share?url=https%3a%2f%2fjunglie85.github.io%2fposts%2fpackedman-game-prototype-development-with-rust%2f&text=Packedman%20game%20prototype%20development%20with%20Rust" aria-label=Twitter>
<i class="fab fa-twitter" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fjunglie85.github.io%2fposts%2fpackedman-game-prototype-development-with-rust%2f&title=Packedman%20game%20prototype%20development%20with%20Rust" aria-label=Linkedin>
<i class="fab fa-linkedin" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fjunglie85.github.io%2fposts%2fpackedman-game-prototype-development-with-rust%2f&is_video=false&description=Packedman%20game%20prototype%20development%20with%20Rust" aria-label=Pinterest>
<i class="fab fa-pinterest" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="mailto:?subject=Packedman%20game%20prototype%20development%20with%20Rust&body=Check out this article: https%3a%2f%2fjunglie85.github.io%2fposts%2fpackedman-game-prototype-development-with-rust%2f" aria-label=Email>
<i class="fas fa-envelope" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fjunglie85.github.io%2fposts%2fpackedman-game-prototype-development-with-rust%2f&title=Packedman%20game%20prototype%20development%20with%20Rust" aria-label=Pocket>
<i class="fab fa-get-pocket" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fjunglie85.github.io%2fposts%2fpackedman-game-prototype-development-with-rust%2f&title=Packedman%20game%20prototype%20development%20with%20Rust" aria-label=reddit>
<i class="fab fa-reddit" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fjunglie85.github.io%2fposts%2fpackedman-game-prototype-development-with-rust%2f&name=Packedman%20game%20prototype%20development%20with%20Rust&description=I%26rsquo%3bm%20developing%20a%20Pac-Man%20inspired%20game%20in%20Rust%20called%20Packedman%20%28think%20Pac-Man%20with%20guns%29.%20I%26rsquo%3bm%20not%20using%20any%20game%20engines%20or%20frameworks%20like%20Bevy%20or%20Amythest.%20Instead%2c%20I%26rsquo%3bm%20developing%20the%20game%20from%20scratch%20so%20that%20I%20can%20learn%20about%20how%20game%20engines%20work.%20In%20this%20and%20following%20articles%20I%26rsquo%3bll%20be%20talking%20about%20how%20I%20approached%20creating%20this%20game.%20There%20are%20many%20other%20ways%20-%20mine%20is%20not%20the%20best%20way%2c%20hopefully%20it%26rsquo%3bs%20not%20the%20worst%20either%21" aria-label=Tumblr>
<i class="fab fa-tumblr" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fjunglie85.github.io%2fposts%2fpackedman-game-prototype-development-with-rust%2f&t=Packedman%20game%20prototype%20development%20with%20Rust" aria-label="Hacker News">
<i class="fab fa-hacker-news" aria-hidden=true></i>
</a>
</li>
</ul>
</div>
<div id=toc>
<nav id=TableOfContents>
<ul>
<li><a href=#current-progress>Current progress</a>
<ul>
<li><a href=#graphics>Graphics</a></li>
<li><a href=#user-input>User input</a></li>
<li><a href=#fixed-framerate>Fixed framerate</a></li>
<li><a href=#maze-loading>Maze loading</a></li>
</ul>
</li>
<li><a href=#whats-next>What&rsquo;s next?</a></li>
</ul>
</nav>
</div>
</span>
</div>
<article class=post itemscope itemtype=http://schema.org/BlogPosting>
<header>
<h1 class=posttitle itemprop="name headline">
Packedman game prototype development with Rust
</h1>
<div class=meta>
<div class=postdate>
<time datetime="2022-01-27 15:12:00 +0000 UTC" itemprop=datePublished>27 Jan 2022</time>
</div>
<div class=article-read-time>
<i class="far fa-clock"></i>
8 minute read
</div>
<div class=article-category>
<i class="fas fa-archive"></i>
<a class=category-link href=/categories/packedman>packedman</a>
</div>
<div class=article-tag>
<i class="fas fa-tag"></i>
<a class=tag-link href=/tags/rust rel=tag>rust</a>
,
<a class=tag-link href=/tags/games rel=tag>games</a>
</div>
</div>
</header>
<div class=content itemprop=articleBody>
<p>I&rsquo;m developing a <a href=https://en.wikipedia.org/wiki/Pac-Man title=Pac-Man>Pac-Man</a> inspired game in Rust called Packedman (think Pac-Man with guns).
I&rsquo;m not using any game engines or frameworks like Bevy or Amythest.
Instead, I&rsquo;m developing the game from scratch so that I can learn about how game engines work.
In this and following articles I&rsquo;ll be talking about how I approached creating this game.
There are many other ways - mine is not the best way, hopefully it&rsquo;s not the worst either!</p>
<h2 id=current-progress>Current progress</h2>
<p>I&rsquo;m working towards completing a prototype that is somewhat of a clone of the original Pac-Man.
I&rsquo;ve currently implemented a game loop with fixed framerate, basic graphics, movement and maze loading.
The screenshot below shows an example of what I have implemented so far.</p>
<p><img src=/packedman/01/img/development-screenshot.png alt="Packedman development screenshot"></p>
<p>To get the prototype to this point I&rsquo;ve had to implement a number of features, including graphics, input, fixed framerate and maze loading.
I&rsquo;m going to give an overview of each of these key features below.
<a href=https://github.com/junglie85/packedman/tree/4ab3ce475abb93e77c0b85db1b117b3f19f8ca98 title="Packedman at current git commit">View the game at the related commit on GitHub</a>.</p>
<h3 id=graphics>Graphics</h3>
<p>I wanted to be able to see something on my screen quite quickly.
Some advice I&rsquo;ve read suggests this is a bad approach but my general software development experience has been that workign towards concrete goals is best.
I didn&rsquo;t want to spend ages grappling with OpenGL, Vulkan or <a href=https://github.com/gfx-rs/wgpu title=wgpu>wgpu</a>, so I chose to use a library called <a href=https://github.com/emoon/rust_minifb title=rust_minifb>minifb</a>.
This allows me to write pixels to a framebuffer and present that to the screen without GPU acceleration.</p>
<p>The framebuffer data is a <code>Vec&lt;u32></code> with each element representing a single pixel.
The vec has capacity for the required number of pixels (calculated as <em>screen width * screen height</em>).
I&rsquo;m using a <code>FrameBuffer</code> struct to encapsulate the relevant functionality:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#ff79c6>pub</span>(<span style=color:#ff79c6>crate</span>) <span style=color:#ff79c6>struct</span> <span style=color:#50fa7b>FrameBuffer</span> {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span>    <span style=color:#ff79c6>pub</span>(<span style=color:#ff79c6>crate</span>) data: <span style=color:#8be9fd;font-style:italic>Vec</span><span style=color:#ff79c6>&lt;</span><span style=color:#8be9fd>u32</span><span style=color:#ff79c6>&gt;</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span>    <span style=color:#ff79c6>pub</span>(<span style=color:#ff79c6>crate</span>) width: <span style=color:#8be9fd>usize</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span>    <span style=color:#ff79c6>pub</span>(<span style=color:#ff79c6>crate</span>) height: <span style=color:#8be9fd>usize</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span>}
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span style=color:#ff79c6>impl</span> FrameBuffer {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span>    <span style=color:#ff79c6>fn</span> <span style=color:#50fa7b>new</span>(width: <span style=color:#8be9fd>usize</span>, height: <span style=color:#8be9fd>usize</span>) -&gt; <span style=color:#50fa7b>Self</span> {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>        Self {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>            data: <span style=color:#50fa7b>vec</span><span style=color:#ff79c6>!</span>[<span style=color:#bd93f9>0x0</span>; width <span style=color:#ff79c6>*</span> height],
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>            width,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span>            height,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span>        }
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span>    }
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span>}
</code></pre></div><p>The <code>FrameBuffer</code> struct&rsquo;s fields are public for other modules within the crate for now, since it was the simplest solution during an earlier refactoring.</p>
<p>Computing the index for a given pixel coordinate is relatively simple given the <em>x</em> and <em>y</em> coordinates and the <em>width</em> of the framebuffer.
The index is calculated as the number of pixels before the required row offset by the number of pixels within the required row.
Or <code>framebuffer.width * y + x</code>.
I make use of this in my <code>Gfx</code> struct when drawing a rectangle into the framebuffer:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#ff79c6>pub</span> <span style=color:#ff79c6>fn</span> <span style=color:#50fa7b>draw_rect</span>(<span style=color:#ff79c6>&amp;</span><span style=color:#ff79c6>mut</span> self, p1: <span style=color:#50fa7b>Vec2</span>, p2: <span style=color:#50fa7b>Vec2</span>, color: <span style=color:#50fa7b>Color</span>) {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span>    <span style=color:#8be9fd;font-style:italic>let</span> x1 <span style=color:#ff79c6>=</span> (p1.x <span style=color:#ff79c6>*</span> self.pixels_per_meter <span style=color:#ff79c6>as</span> <span style=color:#8be9fd>f32</span>).round() <span style=color:#ff79c6>as</span> <span style=color:#8be9fd>i32</span>;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span>    <span style=color:#8be9fd;font-style:italic>let</span> x2 <span style=color:#ff79c6>=</span> (p2.x <span style=color:#ff79c6>*</span> self.pixels_per_meter <span style=color:#ff79c6>as</span> <span style=color:#8be9fd>f32</span>).round() <span style=color:#ff79c6>as</span> <span style=color:#8be9fd>i32</span>;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span>    <span style=color:#8be9fd;font-style:italic>let</span> y1 <span style=color:#ff79c6>=</span> self.height <span style=color:#ff79c6>as</span> <span style=color:#8be9fd>i32</span> <span style=color:#ff79c6>-</span> (p2.y <span style=color:#ff79c6>*</span> self.pixels_per_meter <span style=color:#ff79c6>as</span> <span style=color:#8be9fd>f32</span>).round() <span style=color:#ff79c6>as</span> <span style=color:#8be9fd>i32</span>;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span>    <span style=color:#8be9fd;font-style:italic>let</span> y2 <span style=color:#ff79c6>=</span> self.height <span style=color:#ff79c6>as</span> <span style=color:#8be9fd>i32</span> <span style=color:#ff79c6>-</span> (p1.y <span style=color:#ff79c6>*</span> self.pixels_per_meter <span style=color:#ff79c6>as</span> <span style=color:#8be9fd>f32</span>).round() <span style=color:#ff79c6>as</span> <span style=color:#8be9fd>i32</span>;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span>    <span style=color:#8be9fd;font-style:italic>let</span> x1 <span style=color:#ff79c6>=</span> clamp(<span style=color:#bd93f9>0</span>, x1, self.width <span style=color:#ff79c6>as</span> <span style=color:#8be9fd>i32</span>);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span>    <span style=color:#8be9fd;font-style:italic>let</span> x2 <span style=color:#ff79c6>=</span> clamp(<span style=color:#bd93f9>0</span>, x2, self.width <span style=color:#ff79c6>as</span> <span style=color:#8be9fd>i32</span>);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>    <span style=color:#8be9fd;font-style:italic>let</span> y1 <span style=color:#ff79c6>=</span> clamp(<span style=color:#bd93f9>0</span>, y1, self.height <span style=color:#ff79c6>as</span> <span style=color:#8be9fd>i32</span>);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>    <span style=color:#8be9fd;font-style:italic>let</span> y2 <span style=color:#ff79c6>=</span> clamp(<span style=color:#bd93f9>0</span>, y2, self.height <span style=color:#ff79c6>as</span> <span style=color:#8be9fd>i32</span>);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span>    <span style=color:#ff79c6>for</span> y <span style=color:#ff79c6>in</span> y1<span style=color:#ff79c6>..</span>y2 {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span>        <span style=color:#ff79c6>for</span> x <span style=color:#ff79c6>in</span> x1<span style=color:#ff79c6>..</span>x2 {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span>            <span style=color:#8be9fd;font-style:italic>let</span> pixel <span style=color:#ff79c6>=</span> y <span style=color:#ff79c6>*</span> self.width <span style=color:#ff79c6>as</span> <span style=color:#8be9fd>i32</span> <span style=color:#ff79c6>+</span> x;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span>            self.framebuffer.data[pixel <span style=color:#ff79c6>as</span> <span style=color:#8be9fd>usize</span>] <span style=color:#ff79c6>=</span> color.as_argb();
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span>        }
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span>    }
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span>}
</code></pre></div><p>I wanted my screen coordinates origin to be in the bottom left hand corner.
This means that the pixel representing <em>(0, 0)</em> is actually at index _(0, height).
It also means that <code>y1</code> and <code>y2</code> need to be computed by subtracting the <em>y</em> value of <code>p2</code> and <code>p1</code> respectively from the height.
Doing so reverses the cardinality of the y-axis, enabling me to represent coordinates increaseing upwards from the bottom left corner.</p>
<p>I&rsquo;ve also decoupled the size of my game world from the size of a pixel.
In future, it will be simple to scale the game based on the size of the window that is being displayed into.</p>
<p>Within the framebuffer, each pixel is represented as <code>u32</code> and layed out as <code>alpha | red | green | blue</code>.
Each of the 4 components is represented as <code>u8</code>.
My <code>Color</code> struct handles the storage and manipulation of these bytes, meaning the necessary bitwise operations are nicely encapsulated.
Each 8-bit component is left-shifted into it&rsquo;s correct position and or&rsquo;d with all other components:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>fn</span> <span style=color:#50fa7b>as_argb</span>(self) -&gt; <span style=color:#8be9fd>u32</span> {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>    <span style=color:#8be9fd;font-style:italic>let</span> (r, g, b, a) <span style=color:#ff79c6>=</span> (self.r <span style=color:#ff79c6>as</span> <span style=color:#8be9fd>u32</span>, self.g <span style=color:#ff79c6>as</span> <span style=color:#8be9fd>u32</span>, self.b <span style=color:#ff79c6>as</span> <span style=color:#8be9fd>u32</span>, self.a <span style=color:#ff79c6>as</span> <span style=color:#8be9fd>u32</span>);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span>    (a <span style=color:#ff79c6>&lt;&lt;</span> <span style=color:#bd93f9>24</span>) <span style=color:#ff79c6>|</span> (r <span style=color:#ff79c6>&lt;&lt;</span> <span style=color:#bd93f9>16</span>) <span style=color:#ff79c6>|</span> (g <span style=color:#ff79c6>&lt;&lt;</span> <span style=color:#bd93f9>8</span>) <span style=color:#ff79c6>|</span> b
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span>}
</code></pre></div><p>Updating the display is handled by minifb:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#8be9fd;font-style:italic>let</span> framebuffer <span style=color:#ff79c6>=</span> self.gfx.get_buffer();
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>window.update_with_buffer(<span style=color:#ff79c6>&amp;</span>framebuffer.data, framebuffer.width, framebuffer.height)<span style=color:#ff79c6>?</span>;
</code></pre></div><p>I&rsquo;d like to use GPU acceleration as a future enhancement; most likely I&rsquo;ll use the <a href=https://github.com/gfx-rs/wgpu title=wgpu>wgpu</a> crate.
I suspect I&rsquo;ll choose a half-way house approach and continue to write my own framebuffer and load that as a tecture for the GPU to display.</p>
<h3 id=user-input>User input</h3>
<p>For handling user input, I wanted to be able to pass the current input state to the game when it is updated each frame.
This allows me to provide an <code>Input</code> abstraction over minifb&rsquo;s input mechanism.
Whilst not essential, it provides all the usual benefits that encapsulation and code ownership bring.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#ff79c6>#[derive(PartialEq, Eq, Hash)]</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span style=color:#ff79c6>pub</span> <span style=color:#ff79c6>enum</span> <span style=color:#50fa7b>Key</span> {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span>    Up,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span>    Down,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span>    Left,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span>    Right,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span>    Space,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span>}
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span style=color:#ff79c6>pub</span> <span style=color:#ff79c6>struct</span> <span style=color:#50fa7b>Input</span> {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>    <span style=color:#ff79c6>pub</span>(<span style=color:#ff79c6>crate</span>) keys: <span style=color:#50fa7b>HashMap</span><span style=color:#ff79c6>&lt;</span>Key, <span style=color:#8be9fd>bool</span><span style=color:#ff79c6>&gt;</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span>}
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span style=color:#ff79c6>impl</span> Input {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span>    <span style=color:#ff79c6>pub</span>(<span style=color:#ff79c6>crate</span>) <span style=color:#ff79c6>fn</span> <span style=color:#50fa7b>new</span>() -&gt; <span style=color:#50fa7b>Self</span> {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span>        Self {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span>            keys: <span style=color:#50fa7b>HashMap</span>::new(),
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span>        }
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span>    }
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span>    <span style=color:#ff79c6>pub</span> <span style=color:#ff79c6>fn</span> <span style=color:#50fa7b>is_key_down</span>(<span style=color:#ff79c6>&amp;</span>self, key: <span style=color:#50fa7b>Key</span>) -&gt; <span style=color:#8be9fd>bool</span> {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span>        <span style=color:#ff79c6>match</span> self.keys.get(<span style=color:#ff79c6>&amp;</span>key) {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span>            <span style=color:#8be9fd;font-style:italic>Some</span>(<span style=color:#ff79c6>&amp;</span>is_pressed) <span style=color:#ff79c6>=&gt;</span> is_pressed,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span>            <span style=color:#8be9fd;font-style:italic>None</span> <span style=color:#ff79c6>=&gt;</span> <span style=color:#ff79c6>false</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span>        }
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span>    }
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">27</span>}
</code></pre></div><p>Since Packedman has a simple set of controls, I chose to limit the keys I will handle to those that can move the player and fire the weapon.
During the game loop, before the game is updated, input is processed and the state updated to record whether a key is down.
There&rsquo;s not really anything more complicated to it that that.</p>
<h3 id=fixed-framerate>Fixed framerate</h3>
<p>I&rsquo;ve chosen to implement Packedman as 60 frames per second (FPS), which is quite a common framerate.
I could have chosen 30 FPS, which is also common, but decided to start with the higher and reduce if necessary.
At the moment, getting 60 FPS means making the game loop pause between frames so that updates don&rsquo;t happen too frequently.
I achieve this with the following game loop:</p>
<pre tabindex=0><code>start clock

while window is open:
    get input

    if elapsed time is less than target frame duration:
        sleep for remaining frame duration minus some sleep tolerance
        while elapsed time is less than target frame duration:
            eat CPU cycles for remaining duration

    update clock

    update game
    render
    update window
</code></pre><p>I chose to put my elapsed time checks and sleep window before the game is updated and rendered.
This is because I want my delta time between update calls to always be 16.7ms.
I could also have put the logic for this after rendering, making the framebuffer presentation the start of a frame.
I&rsquo;ve also used a hardcoded sleep tolerance, which I&rsquo;ve found is needed to ensure the sleep duration does not exceed that which was requested.
I don&rsquo;t know how effective this approach will be in the longer term but it serves it&rsquo;s purpose for now:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#8be9fd;font-style:italic>let</span> target_frame_micros <span style=color:#ff79c6>=</span> (ONE_SECOND_AS_MICROS <span style=color:#ff79c6>as</span> <span style=color:#8be9fd>f32</span> <span style=color:#ff79c6>/</span> self.fps <span style=color:#ff79c6>as</span> <span style=color:#8be9fd>f32</span>) <span style=color:#ff79c6>as</span> <span style=color:#8be9fd>u64</span>;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span style=color:#8be9fd;font-style:italic>let</span> target_frame_duration <span style=color:#ff79c6>=</span> Duration::from_micros(target_frame_micros);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span style=color:#8be9fd;font-style:italic>let</span> <span style=color:#ff79c6>mut</span> clock <span style=color:#ff79c6>=</span> Clock::new();
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span style=color:#ff79c6>while</span> window.is_open() {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span>    <span style=color:#8be9fd;font-style:italic>let</span> input <span style=color:#ff79c6>=</span> process_input(<span style=color:#ff79c6>&amp;</span><span style=color:#ff79c6>mut</span> window);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span>    <span style=color:#ff79c6>if</span> clock.split() <span style=color:#ff79c6>&lt;</span> target_frame_duration {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>        <span style=color:#8be9fd;font-style:italic>let</span> sleep <span style=color:#ff79c6>=</span> target_frame_duration <span style=color:#ff79c6>-</span> clock.split();
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>        <span style=color:#8be9fd;font-style:italic>let</span> sleep_tolerance <span style=color:#ff79c6>=</span> Duration::from_millis(<span style=color:#bd93f9>2</span>);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>        <span style=color:#ff79c6>if</span> sleep <span style=color:#ff79c6>&gt;=</span> sleep_tolerance {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span>            std::thread::sleep(sleep <span style=color:#ff79c6>-</span> sleep_tolerance);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span>        }
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span>        <span style=color:#ff79c6>while</span> clock.split() <span style=color:#ff79c6>&lt;</span> target_frame_duration {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span>            <span style=color:#6272a4>// Eat CPU cycles for remaining duration.
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span style=color:#6272a4></span>        }
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span>    }
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span>    clock.update();
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span>    game.on_update(<span style=color:#ff79c6>&amp;</span>input, clock.delta());
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span>    game.on_render(<span style=color:#ff79c6>&amp;</span><span style=color:#ff79c6>mut</span> self.gfx);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span>    <span style=color:#8be9fd;font-style:italic>let</span> framebuffer <span style=color:#ff79c6>=</span> self.gfx.get_buffer();
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span>    window.update_with_buffer(<span style=color:#ff79c6>&amp;</span>framebuffer.data, framebuffer.width, framebuffer.height)<span style=color:#ff79c6>?</span>;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">27</span>}
</code></pre></div><p>The clock I use is relatively simple.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#ff79c6>pub</span> <span style=color:#ff79c6>struct</span> <span style=color:#50fa7b>Clock</span> {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span>    last_update: <span style=color:#50fa7b>Instant</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span>    delta: <span style=color:#50fa7b>Duration</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span>}
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span style=color:#ff79c6>impl</span> Clock {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span>    <span style=color:#ff79c6>pub</span> <span style=color:#ff79c6>fn</span> <span style=color:#50fa7b>new</span>() -&gt; <span style=color:#50fa7b>Self</span> {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span>        <span style=color:#8be9fd;font-style:italic>Default</span>::default()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>    }
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>    <span style=color:#ff79c6>pub</span> <span style=color:#ff79c6>fn</span> <span style=color:#50fa7b>update</span>(<span style=color:#ff79c6>&amp;</span><span style=color:#ff79c6>mut</span> self) {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span>        <span style=color:#8be9fd;font-style:italic>let</span> instant <span style=color:#ff79c6>=</span> Instant::now();
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span>        self.delta <span style=color:#ff79c6>=</span> instant <span style=color:#ff79c6>-</span> self.last_update;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span>        self.last_update <span style=color:#ff79c6>=</span> instant;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span>    }
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span>    <span style=color:#ff79c6>pub</span> <span style=color:#ff79c6>fn</span> <span style=color:#50fa7b>split</span>(<span style=color:#ff79c6>&amp;</span>self) -&gt; <span style=color:#50fa7b>Duration</span> {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span>        Instant::now() <span style=color:#ff79c6>-</span> self.last_update
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span>    }
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span>    <span style=color:#ff79c6>pub</span> <span style=color:#ff79c6>fn</span> <span style=color:#50fa7b>delta</span>(<span style=color:#ff79c6>&amp;</span>self) -&gt; <span style=color:#50fa7b>Duration</span> {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span>        self.delta
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span>    }
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span>}
</code></pre></div><p>It needs to be updated each frame with a call to <code>Clock::update()</code>, although I may rename this to <code>tick</code> in the future.
The currently elapsed time since the last call to <code>update</code> is available from the <code>split</code> method.
The time between the last two calls to <code>update</code> is available from the <code>delta</code> method.</p>
<h3 id=maze-loading>Maze loading</h3>
<p>I&rsquo;d like to be able to generate random mazes for Packedman to navigate.
However, I&rsquo;m starting with a single maze that can be loaded from a string:</p>
<pre tabindex=0><code>┌──────────────────────────┐
│............║║............│
│.╔══╗.╔═══╗.║║.╔═══╗.╔══╗.│
│.║  ║.║   ║.║║.║   ║.║  ║.│
│.╚══╝.╚═══╝.╚╝.╚═══╝.╚══╝.│
│..........................│
│.╔══╗.╔╗.╔══════╗.╔╗.╔══╗.│
│.╚══╝.║║.╚══╗╔══╝.║║.╚══╝.│
│......║║....║║....║║......│
└────┐.║╚══╗ ║║ ╔══╝║.┌────┘
     │.║╔══╝ ╚╝ ╚══╗║.│     
     │.║║          ║║.│     
     │.║║ ╔══DD══╗ ║║.│     
─────┘.╚╝ ║HHHHHH║ ╚╝.└─────
.......   ║HHHHHH║   .......
─────┐.╔╗ ║HHHHHH║ ╔╗.┌─────
     │.║║ ╚══════╝ ║║.│     
     │.║║          ║║.│     
     │.║║ ╔══════╗ ║║.│     
┌────┘.╚╝ ╚══╗╔══╝ ╚╝.└────┐
│............║║............│
│.╔══╗.╔═══╗.║║.╔═══╗.╔══╗.│
│.╚═╗║.╚═══╝.╚╝.╚═══╝.║╔═╝.│
│...║║................║║...│
└─┐.║║.╔╗.╔══════╗.╔╗.║║.┌─┘
┌─┘.╚╝.║║.╚══╗╔══╝.║║.╚╝.└─┐
│......║║....║║....║║......│
│.╔════╝╚══╗.║║.╔══╝╚════╗.│
│.╚════════╝.╚╝.╚════════╝.│
│..........................│
└──────────────────────────┘
</code></pre><p>The string is processed character by character to build a programmatic representation.
I&rsquo;ve used a pretty beefy <code>match</code> expression to construct a maze tile for the appropriate topology.
For example:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#8be9fd;font-style:italic>let</span> <span style=color:#ff79c6>mut</span> y <span style=color:#ff79c6>=</span> height <span style=color:#ff79c6>*</span> tile_size.y;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span style=color:#ff79c6>for</span> row <span style=color:#ff79c6>in</span> map_rows {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span>    <span style=color:#8be9fd;font-style:italic>let</span> <span style=color:#ff79c6>mut</span> x <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>0.0</span>;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span>    <span style=color:#8be9fd;font-style:italic>let</span> <span style=color:#ff79c6>mut</span> tiles <span style=color:#ff79c6>=</span> row.chars();
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span>    <span style=color:#ff79c6>while</span> <span style=color:#8be9fd;font-style:italic>let</span> <span style=color:#8be9fd;font-style:italic>Some</span>(tile) <span style=color:#ff79c6>=</span> tiles.next() {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span>        <span style=color:#ff79c6>match</span> tile {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span>            <span style=color:#f1fa8c>&#39;│&#39;</span> <span style=color:#ff79c6>=&gt;</span> walls.push(Wall {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span>                pos: <span style=color:#50fa7b>Vec2</span>::new(x, y),
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>                size: <span style=color:#50fa7b>Vec2</span>::new(tile_size.x, tile_size.y),
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>            }),
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>            <span style=color:#ff79c6>..</span>.
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span>            _ <span style=color:#ff79c6>=&gt;</span> (),
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span>        }
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span>        x <span style=color:#ff79c6>+=</span> tile_size.x;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span>    }
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span>    y <span style=color:#ff79c6>-=</span> tile_size.y;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span>}
</code></pre></div><p>There are definitely some improvements I can make to the maze loading code as I go forward.
However, it serves a purpose for now and allows me to progress on to other aspects of the initial prototype.</p>
<h2 id=whats-next>What&rsquo;s next?</h2>
<p>My next steps are going to be to add collision detection so that I can keep Packedman within the maze passageways.
Then I want to add a basic debug UI to show FPS and collision boxes.
To do that I&rsquo;ll need to add the ability to display text, but I don&rsquo;t want to deal with font loading right now.
With those items of functionality in place, I hope to add the ability for Packedman to fire projectiles and collect treasure.</p>
</div>
</article>
<div class=blog-post-comments>
<div id=disqus_thread>
<script type=text/javascript>(function(){var a=document.createElement('script'),b;a.type='text/javascript',a.async=!0,b='junglie85',a.src='//'+b+'.disqus.com/embed.js',(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(a)})()</script>
<noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript>
<a href=https://disqus.com/ class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a>
</div>
</div>
<div id=footer-post-container>
<div id=footer-post>
<div id=nav-footer style=display:none>
<ul>
<li><a href=/>Home</a></li>
<li><a href=/posts>Writings</a></li>
<li><a href=/tags>Tags</a></li>
<li><a href=/about>About</a></li>
</ul>
</div>
<div id=toc-footer style=display:none>
<nav id=TableOfContents>
<ul>
<li><a href=#current-progress>Current progress</a>
<ul>
<li><a href=#graphics>Graphics</a></li>
<li><a href=#user-input>User input</a></li>
<li><a href=#fixed-framerate>Fixed framerate</a></li>
<li><a href=#maze-loading>Maze loading</a></li>
</ul>
</li>
<li><a href=#whats-next>What&rsquo;s next?</a></li>
</ul>
</nav>
</div>
<div id=share-footer style=display:none>
<ul>
<li>
<a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fjunglie85.github.io%2fposts%2fpackedman-game-prototype-development-with-rust%2f" aria-label=Facebook>
<i class="fab fa-facebook fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://twitter.com/share?url=https%3a%2f%2fjunglie85.github.io%2fposts%2fpackedman-game-prototype-development-with-rust%2f&text=Packedman%20game%20prototype%20development%20with%20Rust" aria-label=Twitter>
<i class="fab fa-twitter fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fjunglie85.github.io%2fposts%2fpackedman-game-prototype-development-with-rust%2f&title=Packedman%20game%20prototype%20development%20with%20Rust" aria-label=Linkedin>
<i class="fab fa-linkedin fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fjunglie85.github.io%2fposts%2fpackedman-game-prototype-development-with-rust%2f&is_video=false&description=Packedman%20game%20prototype%20development%20with%20Rust" aria-label=Pinterest>
<i class="fab fa-pinterest fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="mailto:?subject=Packedman%20game%20prototype%20development%20with%20Rust&body=Check out this article: https%3a%2f%2fjunglie85.github.io%2fposts%2fpackedman-game-prototype-development-with-rust%2f" aria-label=Email>
<i class="fas fa-envelope fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fjunglie85.github.io%2fposts%2fpackedman-game-prototype-development-with-rust%2f&title=Packedman%20game%20prototype%20development%20with%20Rust" aria-label=Pocket>
<i class="fab fa-get-pocket fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fjunglie85.github.io%2fposts%2fpackedman-game-prototype-development-with-rust%2f&title=Packedman%20game%20prototype%20development%20with%20Rust" aria-label=reddit>
<i class="fab fa-reddit fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fjunglie85.github.io%2fposts%2fpackedman-game-prototype-development-with-rust%2f&name=Packedman%20game%20prototype%20development%20with%20Rust&description=I%26rsquo%3bm%20developing%20a%20Pac-Man%20inspired%20game%20in%20Rust%20called%20Packedman%20%28think%20Pac-Man%20with%20guns%29.%20I%26rsquo%3bm%20not%20using%20any%20game%20engines%20or%20frameworks%20like%20Bevy%20or%20Amythest.%20Instead%2c%20I%26rsquo%3bm%20developing%20the%20game%20from%20scratch%20so%20that%20I%20can%20learn%20about%20how%20game%20engines%20work.%20In%20this%20and%20following%20articles%20I%26rsquo%3bll%20be%20talking%20about%20how%20I%20approached%20creating%20this%20game.%20There%20are%20many%20other%20ways%20-%20mine%20is%20not%20the%20best%20way%2c%20hopefully%20it%26rsquo%3bs%20not%20the%20worst%20either%21" aria-label=Tumblr>
<i class="fab fa-tumblr fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fjunglie85.github.io%2fposts%2fpackedman-game-prototype-development-with-rust%2f&t=Packedman%20game%20prototype%20development%20with%20Rust" aria-label="Hacker News">
<i class="fab fa-hacker-news fa-lg" aria-hidden=true></i>
</a>
</li>
</ul>
</div>
<div id=actions-footer>
<a id=menu-toggle class=icon href=# onclick="return $('#nav-footer').toggle(),!1" aria-label=Menu>
<i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=toc-toggle class=icon href=# onclick="return $('#toc-footer').toggle(),!1" aria-label=TOC>
<i class="fas fa-list fa-lg" aria-hidden=true></i> TOC</a>
<a id=share-toggle class=icon href=# onclick="return $('#share-footer').toggle(),!1" aria-label=Share>
<i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast')" aria-label="Top of Page">
<i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a>
</div>
</div>
</div>
<footer id=footer>
<div class=footer-left>
Copyright &copy; 2022 Ashley Morton-Bye
</div>
<div class=footer-right>
<nav>
<ul>
<li><a href=/>Home</a></li>
<li><a href=/posts>Writings</a></li>
<li><a href=/tags>Tags</a></li>
<li><a href=/about>About</a></li>
</ul>
</nav>
</div>
</footer>
</div>
</body>
<link rel=stylesheet href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>
<script src=/js/code-copy.js></script>
</html>